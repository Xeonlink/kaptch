# Kaptch - ν•κµ­ λ¨λ°”μΌμΈμ¦ μΊ΅μ±  μλ™ μΈμ‹ νμ΄ν”„λΌμΈ

ν•κµ­ λ¨λ°”μΌμΈμ¦ μ„λΉ„μ¤μ μΊ΅μ± λ¥Ό μλ™μΌλ΅ μΈμ‹ν•λ” λ¨Έμ‹ λ¬λ‹ νμ΄ν”„λΌμΈμ…λ‹λ‹¤. CRNN(Convolutional Recurrent Neural Network) λ¨λΈμ„ μ‚¬μ©ν•μ—¬ μΊ΅μ±  μ΄λ―Έμ§€μ μ«μλ¥Ό μ •ν™•ν•κ² μΈμ‹ν•©λ‹λ‹¤.

## π€ μ£Όμ” κΈ°λ¥

- **μλ™ λ°μ΄ν„° μμ§‘**: Playwrightλ¥Ό μ‚¬μ©ν• μ›Ή ν¬λ΅¤λ§
- **μ›Ή κΈ°λ° λΌλ²¨λ§**: λΈλΌμ°μ €λ¥Ό ν†µν• νΈλ¦¬ν• λΌλ²¨λ§ μΈν„°νμ΄μ¤
- **λ¨λΈ ν›λ ¨**: CRNN λ¨λΈμ„ μ‚¬μ©ν• μΊ΅μ±  μΈμ‹ ν›λ ¨
- **μ²΄ν¬ν¬μΈνΈ κ΄€λ¦¬**: ν›λ ¨ κ³Όμ •μ μ²΄ν¬ν¬μΈνΈ μ €μ¥ λ° κ΄€λ¦¬
- **ONNX λ³€ν™**: μ¶”λ΅  μµμ ν™”λ¥Ό μ„ν• ONNX λ¨λΈ λ³€ν™

## π“‹ μ§€μ›ν•λ” μΈμ¦μ—…μ²΄

- **NHN KCP**: NHN KCP λ¨λ°”μΌμΈμ¦
- **NICE ν‰κ°€μ •λ³΄**: NICE λ³ΈμΈν™•μΈ
- **SCI ν‰κ°€μ •λ³΄**: SCI λ³ΈμΈν™•μΈ
- **KMCERT**: KMCERT λ³ΈμΈν™•μΈ

## π› οΈ μ„¤μΉ λ° μ‹¤ν–‰

### 1. μμ΅΄μ„± μ„¤μΉ
```bash
pip install -r requirements.txt
```

### 2. κΈ°λ³Έ μ‚¬μ©λ²•
```bash
# λ©”μΈ CLI μ‹¤ν–‰
python main.py --help

# λ°μ΄ν„°μ…‹ μƒμ„±
python main.py datasets create sci

# μΊ΅μ±  μμ§‘
python main.py datasets crawl sci

# λΌλ²¨λ§ μ„λ²„ μ‹μ‘
python main.py datasets label

# λ¨λΈ ν›λ ¨
python main.py train sci

# μ²΄ν¬ν¬μΈνΈ ν™•μΈ
python main.py checkpoints list sci

# ONNX λ³€ν™
python main.py misc torch2onnx sci ep4.pkl
```

## π“– μƒμ„Έ μ‚¬μ©λ²•

### λ°μ΄ν„°μ…‹ κ΄€λ¦¬

#### λ°μ΄ν„°μ…‹ μƒμ„±
```bash
python main.py datasets create <λ°μ΄ν„°μ…‹λ…>
```
μƒλ΅μ΄ λ°μ΄ν„°μ…‹μ„ μƒμ„±ν•©λ‹λ‹¤. ν•μ΄ν”μ€ μλ™μΌλ΅ μ–Έλ”μ¤μ½”μ–΄λ΅ λ³€ν™λ©λ‹λ‹¤.

#### μΊ΅μ±  μμ§‘
```bash
python main.py datasets crawl <λ°μ΄ν„°μ…‹λ…> [--goal 1100] [--headless]
```
μ›Ήμ‚¬μ΄νΈμ—μ„ μΊ΅μ±  μ΄λ―Έμ§€λ¥Ό μλ™μΌλ΅ μμ§‘ν•©λ‹λ‹¤.

#### λΌλ²¨λ§
```bash
python main.py datasets label [--port 3000]
```
μ›Ή λΈλΌμ°μ €λ¥Ό ν†µν•΄ μΊ΅μ±  μ΄λ―Έμ§€μ— λΌλ²¨μ„ λ¶™μΌ μ μλ” μ„λ²„λ¥Ό μ‹μ‘ν•©λ‹λ‹¤.

### λ¨λΈ ν›λ ¨

#### κΈ°λ³Έ ν›λ ¨
```bash
python main.py train <λ°μ΄ν„°μ…‹λ…>
```

#### κ³ κΈ‰ ν›λ ¨ μµμ…
```bash
python main.py train <λ°μ΄ν„°μ…‹λ…> \
  --epochs 100 \
  --batch-size 64 \
  --learning-rate 1e-3 \
  --patience 10 \
  --train-size 2000 \
  --test-size 200
```

### μ²΄ν¬ν¬μΈνΈ κ΄€λ¦¬

#### μ²΄ν¬ν¬μΈνΈ λ©λ΅ ν™•μΈ
```bash
python main.py checkpoints list <λ°μ΄ν„°μ…‹λ…>
python main.py checkpoints list all  # λ¨λ“  λ°μ΄ν„°μ…‹
```

#### μ²΄ν¬ν¬μΈνΈ μ‚­μ 
```bash
python main.py checkpoints remove <λ°μ΄ν„°μ…‹λ…>
```

### μ ν‹Έλ¦¬ν‹°

#### ONNX λ³€ν™
```bash
python main.py misc torch2onnx <λ°μ΄ν„°μ…‹λ…> <μ²΄ν¬ν¬μΈνΈλ…> [--output captcha.onnx]
```

## π—οΈ ν”„λ΅μ νΈ κµ¬μ΅°

```
kaptch/
β”β”€β”€ main.py                 # λ©”μΈ CLI μ§„μ…μ 
β”β”€β”€ src/
β”‚   β”β”€β”€ datasets/          # λ°μ΄ν„°μ…‹ κ΄€λ¦¬
β”‚   β”‚   β”β”€β”€ __init__.py   # λ°μ΄ν„°μ…‹ CLI
β”‚   β”‚   β”β”€β”€ label.py      # μ›Ή λΌλ²¨λ§ μ„λ²„
β”‚   β”‚   β””β”€β”€ pom.py        # νμ΄μ§€ μ¤λΈμ νΈ λ¨λΈ
β”‚   β”β”€β”€ train/            # λ¨λΈ ν›λ ¨
β”‚   β”‚   β”β”€β”€ __init__.py   # ν›λ ¨ CLI
β”‚   β”‚   β”β”€β”€ model.py      # CRNN λ¨λΈ μ •μ
β”‚   β”‚   β”β”€β”€ dataset.py    # λ°μ΄ν„°μ…‹ ν΄λμ¤
β”‚   β”‚   β””β”€β”€ checkpoint.py # μ²΄ν¬ν¬μΈνΈ κ΄€λ¦¬
β”‚   β”β”€β”€ checkpoints.py    # μ²΄ν¬ν¬μΈνΈ CLI
β”‚   β”β”€β”€ misc.py          # κΈ°νƒ€ μ ν‹Έλ¦¬ν‹°
β”‚   β””β”€β”€ constants.py     # μƒμ μ •μ
β”β”€β”€ dataset/              # λ°μ΄ν„°μ…‹ μ €μ¥μ†
β”β”€β”€ checkpoints/          # μ²΄ν¬ν¬μΈνΈ μ €μ¥μ†
β””β”€β”€ captcha.onnx         # λ³€ν™λ ONNX λ¨λΈ
```

## π”§ κΈ°μ  μ¤νƒ

- **Python 3.12+**: λ©”μΈ ν”„λ΅κ·Έλλ° μ–Έμ–΄
- **PyTorch**: λ”¥λ¬λ‹ ν”„λ μ„μ›ν¬
- **Typer**: CLI ν”„λ μ„μ›ν¬
- **Rich**: ν„°λ―Έλ„ μ¶λ ¥ λΌμ΄λΈλ¬λ¦¬
- **Playwright**: μ›Ή μλ™ν™”
- **Flask**: μ›Ή λΌλ²¨λ§ μ„λ²„
- **OpenCV**: μ΄λ―Έμ§€ μ²λ¦¬
- **ONNX**: λ¨λΈ λ³€ν™ λ° μ¶”λ΅ 

## π“ λ¨λΈ μ•„ν‚¤ν…μ²

- **CNN**: μ΄λ―Έμ§€ νΉμ§• μ¶”μ¶ (Depthwise Separable Convolution μ‚¬μ©)
- **RNN**: μ‹ν€€μ¤ λ¨λΈλ§ (Bidirectional GRU)
- **CTC Loss**: κ°€λ³€ κΈΈμ΄ μ¶λ ¥ μ²λ¦¬
- **Early Stopping**: κ³Όμ ν•© λ°©μ§€
- **Learning Rate Scheduling**: μµμ ν™” μ„±λ¥ ν–¥μƒ

## β οΈ μ£Όμμ‚¬ν•­

1. **λ²•μ  κ³ λ ¤μ‚¬ν•­**: μ›Ή ν¬λ΅¤λ§ μ‹ ν•΄λ‹Ή μ›Ήμ‚¬μ΄νΈμ μ΄μ©μ•½κ΄€μ„ μ¤€μν•μ„Έμ”.
2. **λ°μ΄ν„° λ³΄μ•**: μμ§‘λ λ°μ΄ν„°μ μ•μ „ν• κ΄€λ¦¬κ°€ ν•„μ”ν•©λ‹λ‹¤.
3. **λ¦¬μ†μ¤ κ΄€λ¦¬**: GPU λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ„ λ¨λ‹ν„°λ§ν•μ„Έμ”.
4. **λ°±μ—…**: μ¤‘μ”ν• μ²΄ν¬ν¬μΈνΈλ” μ •κΈ°μ μΌλ΅ λ°±μ—…ν•μ„Έμ”.

## π“„ λΌμ΄μ„ μ¤

μ΄ ν”„λ΅μ νΈλ” κµμ΅ λ° μ—°κµ¬ λ©μ μΌλ΅ μ μ‘λμ—μµλ‹λ‹¤. μƒμ—…μ  μ‚¬μ© μ‹ κ΄€λ ¨ λ²•κ·λ¥Ό μ¤€μν•μ‹κΈ° λ°”λλ‹λ‹¤.

## π“ λ¬Έμ

ν”„λ΅μ νΈμ— λ€ν• λ¬Έμμ‚¬ν•­μ΄λ‚ λ²„κ·Έ λ¦¬ν¬νΈλ” GitHub Issuesλ¥Ό ν†µν•΄ μ μ¶ν•΄ μ£Όμ„Έμ”.
